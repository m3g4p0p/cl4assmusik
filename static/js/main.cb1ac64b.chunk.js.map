{"version":3,"sources":["lib/observer.js","lib/provider.js","lib/storage.js","lib/util.js","lib/favorites.js","lib/color.js","lib/data.js","hero/hero.js","toggle-button/toggle-button.js","favorite-icon/favorite-icon.js","favorite-toggle/favorite-toggle.js","search-box/search-box.js","album-link/album-link.js","related-list/related-list.js","tag-list/tag-list.js","player-head/player-head.js","lazy-iframe/lazy-iframe.js","player/player.js","player-list/player-list.js","app.js","serviceWorker.js","index.js"],"names":["dispatch","entries","forEach","entry","target","isIntersecting","callbacks","get","callback","once","unobserve","makeObserver","BaseObserver","options","Map","this","set","delete","clear","records","call","IntersectionObserver","window","ResizeObserver","useObservedRef","observer","ref","useRef","useState","setEntry","useEffect","current","observe","createProvider","Context","hookFactory","args","props","state","update","hook","useMemo","Provider","value","useStoredState","key","initial","prefixed","prefix","id","resolveKey","localStorage","getItem","JSON","parse","setState","idleHandle","requestIdleCallback","setItem","stringify","cancelIdleCallback","toggle","list","item","filtered","filter","length","concat","join","values","separator","map","Array","isArray","split","assemble","Boolean","trim","negate","hasValues","throttleRAF","isScheduled","requestAnimationFrame","isFavorite","favorites","album","ids","includes","filterFavorites","albums","show","FavoritesContext","createContext","FavoritesProvider","reducer","stored","setStored","useReducer","action","type","payload","Error","randomizeHue","rgbString","maxShift","hueShift","Color","shiftHue","toCSS","slice","Math","round","random","MAX_INITIAL_HUE_SHIFT","config","constants","stringifyAlbum","artist","title","replace","colorizeAlbum","params","linkcol","defaults","bgcol","getId","getAlbum","nId","Number","find","tags","tag","related","sort","a","b","firstForArtist","reduce","every","push","Hero","headline","copy","className","ToggleButton","onClick","active","onToggle","handleClick","useCallback","event","FavoriteIcon","FavoriteToggle","useContext","selectTag","selectionStart","selectionEnd","wordStart","match","pop","wordEnd","SearchBox","SearchContext","search","setSearch","inputRef","setValue","handleKeyDown","focus","preventScroll","document","addEventListener","removeEventListener","useFocusRef","IntersectionContext","stickyRef","isSticky","canHide","setCanHide","scrollY","handleScroll","handle","setTimeout","clearTimeout","useCanHide","onChange","onMouseUp","AlbumLink","link","href","rel","RelatedList","SelectedContext","setSelected","selectAlbum","dataset","preventDefault","selected","data-id","TagList","hash","PlayerHead","onToggleTracklist","LazyIframe","src","onLoad","Player","memo","showRelated","showTracklist","setShowTracklist","isLoading","setIsLoading","color","toHSL","style","hue","saturation","lightness","Object","encodeURIComponent","seamless","PlayerList","matches","setMatches","splitRelated","keys","patters","term","RegExp","pattern","test","searchList","hidden","SearchProvider","SelectedProvider","adjustHueShift","scrollMax","documentElement","scrollHeight","innerHeight","scrollDegree","setProperty","App","Observer","setObserver","disconnect","useObserver","body","location","hostname","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.cb1ac64b.chunk.js","sourcesContent":["import { useRef, useEffect, useState } from 'react'\n\nfunction dispatch (entries) {\n  entries.forEach(entry => {\n    const { target, isIntersecting } = entry\n    const { callback, once } = this.callbacks.get(target) || {}\n\n    if (callback) {\n      callback(entry, this)\n\n      if (once && isIntersecting) {\n        this.unobserve(target)\n      }\n    }\n  })\n}\n\nfunction makeObserver (BaseObserver) {\n  return class extends BaseObserver {\n    callbacks = new Map()\n\n    constructor (options) {\n      super(dispatch, options)\n    }\n\n    observe (target, callback, once = false) {\n      this.callbacks.set(target, { callback, once })\n      return super.observe(target)\n    }\n\n    unobserve (target) {\n      this.callbacks.delete(target)\n      return super.unobserve(target)\n    }\n\n    disconnect () {\n      this.callbacks.clear()\n      return super.disconnect()\n    }\n\n    takeRecords () {\n      const records = super.takeRecords()\n      dispatch.call(this, records)\n      return records\n    }\n  }\n}\n\nexport const IntersectionObserver = makeObserver(window.IntersectionObserver)\nexport const ResizeObserver = makeObserver(window.ResizeObserver)\n\nexport function useObserver (Observer, options) {\n  const [observer, setObserver] = useState(null)\n\n  useEffect(() => {\n    const observer = new Observer(options)\n    setObserver(observer)\n    return () => observer.disconnect()\n  }, [Observer, options])\n\n  return observer\n}\n\nexport function useObservedRef (observer, once) {\n  const ref = useRef()\n  const [entry, setEntry] = useState({})\n\n  useEffect(() => {\n    const { current } = ref\n\n    if (!current || !observer) {\n      return\n    }\n\n    observer.observe(current, setEntry, once)\n    return () => observer.unobserve(current)\n  }, [ref, observer, once])\n\n  return [ref, entry]\n}\n","import React, { useMemo } from 'react'\n\nexport function createProvider (Context, hookFactory, ...args) {\n  return function StorageProvider (props) {\n    const [state, update] = hookFactory(...args)\n    const hook = useMemo(() => [state, update], [state, update])\n\n    return <Context.Provider value={hook} {...props} />\n  }\n}\n","import { useEffect, useReducer, useState } from 'react'\n\nfunction resolveKey (key) {\n  if (typeof key === 'string') {\n    return key\n  }\n\n  const [prefix, id] = key\n  return `${prefix}_${id}`\n}\n\nfunction getItem (key) {\n  const value = window.localStorage.getItem(key)\n  return value && JSON.parse(value)\n}\n\nfunction setItem (key, value) {\n  window.localStorage.setItem(key, JSON.stringify(value))\n}\n\nexport function useStoredState (key, initial) {\n  const prefixed = resolveKey(key)\n  const [state, setState] = useState(getItem(prefixed) || initial)\n\n  useEffect(() => {\n    const idleHandle = window.requestIdleCallback(() => {\n      setItem(prefixed, state)\n    })\n\n    return () => window.cancelIdleCallback(idleHandle)\n  }, [prefixed, state])\n\n  return [state, setState]\n}\n\nexport function useStoredReducer (reducer, key, initial) {\n  const [stored, setStored] = useStoredState(key, initial)\n  const [state, dispatch] = useReducer(reducer, stored)\n\n  useEffect(() => {\n    setStored(state)\n  }, [state, setStored])\n\n  return [state, dispatch]\n}\n","export function toggle (list, item) {\n  const filtered = list.filter(current => current !== item)\n\n  if (filtered.length < list.length) {\n    return filtered\n  }\n\n  return list.concat([item])\n}\n\nexport function join (values, separator = ' ') {\n  return values.map(value => Array.isArray(value)\n    ? join(value, separator)\n    : value\n  ).join(separator)\n}\n\nexport function split (value) {\n  return value.split(/\\s+/)\n}\n\nexport function searchList (list, keys, search) {\n  const patters = split(search).map(term => new RegExp(term, 'i'))\n\n  return list.filter(item => {\n    const value = join(keys.map(key => item[key]))\n    return patters.every(pattern => pattern.test(value))\n  })\n}\n\nexport function assemble (...values) {\n  return join(values.filter(Boolean)).trim()\n}\n\nexport function negate (value) {\n  return !value\n}\n\nexport function hasValues (list) {\n  return list && list.length > 0\n}\n\nexport function throttleRAF (callback) {\n  let isScheduled = false\n\n  return () => {\n    if (isScheduled) {\n      return\n    }\n\n    isScheduled = true\n\n    window.requestAnimationFrame(() => {\n      callback()\n      isScheduled = false\n    })\n  }\n}\n","import { createContext } from 'react'\nimport { createProvider } from './provider'\nimport { useStoredReducer } from './storage'\nimport { toggle } from './util'\n\nfunction favoritesReducer (state, action) {\n  const { show, ids } = state\n  const { type, payload } = action\n\n  switch (type) {\n    case 'toggle_id':\n      return {\n        show,\n        ids: toggle(ids, payload)\n      }\n\n    case 'toggle_show':\n      return {\n        show: !show,\n        ids\n      }\n\n    default:\n      throw new Error(`Invalid action ${action.type}`)\n  }\n}\n\nexport function isFavorite (favorites, album) {\n  const id = typeof album === 'object' ? album.id : album\n  return favorites.ids.includes(id)\n}\n\nexport function filterFavorites (favorites, albums) {\n  return favorites.show ? albums.filter(id => isFavorite(favorites, id)) : albums\n}\n\nexport const FavoritesContext = createContext(null)\n\nexport const FavoritesProvider = createProvider(\n  FavoritesContext,\n  useStoredReducer,\n  favoritesReducer,\n  'favorites',\n  { show: false, ids: [] }\n)\n","import Color from 'color-js'\n\nexport function shiftHue (rgbString, hueShift) {\n  return Color('#' + rgbString).shiftHue(hueShift).toCSS().slice(1)\n}\n\nexport function randomizeHue (rgbString, maxShift) {\n  const delta = Math.round(Math.random() * maxShift) % 360\n  return shiftHue(rgbString, delta)\n}\n\nexport function getHSV (rgbString) {\n  return new Color('#' + rgbString).toHSL()\n}\n","import config from '../config.json'\nimport { randomizeHue } from './color'\n\nconst { MAX_INITIAL_HUE_SHIFT } = config.constants\n\nfunction stringifyAlbum ({ artist, title }) {\n  return `${artist.replace(/^the\\s+/i, '')} ${title}`\n}\n\nfunction colorizeAlbum ({ params }) {\n  const {\n    linkcol = config.defaults.linkcol,\n    bgcol = config.defaults.bgcol\n  } = params\n\n  return {\n    linkcol: randomizeHue(linkcol, MAX_INITIAL_HUE_SHIFT),\n    bgcol: randomizeHue(bgcol, MAX_INITIAL_HUE_SHIFT)\n  }\n}\n\nexport function getId ({ id, params }) {\n  return id || params.album\n}\n\nexport function getAlbum (id) {\n  const nId = Number(id)\n  return albums.find(album => album.id === nId)\n}\n\nexport const albums = config.albums.map(album => ({\n  ...album,\n  id: getId(album),\n  tags: album.tags && album.tags.map(tag => `#${tag}`),\n  params: {\n    ...config.defaults,\n    ...album.params,\n    ...colorizeAlbum(album)\n  },\n  related: config.albums.filter(({ artist, title }) => (\n    artist === album.artist &&\n    title !== album.title\n  )).map(getId)\n})).sort((a, b) => stringifyAlbum(a) < stringifyAlbum(b) ? -1 : 1)\n\nexport const firstForArtist = albums.reduce((list, album) => {\n  if (list.every(({ artist }) => artist !== album.artist)) {\n    list.push(album)\n  }\n\n  return list\n}, []).map(getId)\n","import React from 'react'\nimport './hero.scss'\n\nexport function Hero ({ headline, copy, ...props }) {\n  return (\n    <div className='hero'>\n      <h1>{headline}</h1>\n      <p>{copy}</p>\n    </div>\n  )\n}\n","import React, { useCallback } from 'react'\nimport { negate, assemble } from '../lib/util'\nimport './toggle-button.scss'\n\nexport function ToggleButton ({\n  onClick,\n  active,\n  onToggle,\n  update = negate,\n  className = '',\n  ...props\n}) {\n  const handleClick = useCallback(event => {\n    if (onClick) {\n      onClick(event)\n    }\n\n    onToggle(update)\n  }, [onClick, onToggle, update])\n\n  return (\n    <button\n      type='button'\n      {...props}\n      className={assemble(\n        className,\n        'toggle-button',\n        active && '-is-active'\n      )}\n      onClick={handleClick}\n    />\n  )\n}\n","import React from 'react'\n\nexport function FavoriteIcon ({ active }) {\n  return <span className='favorite-icon'>{active ? '\\u2605' : '\\u2606'}</span>\n}\n","import React, { useContext } from 'react'\nimport { FavoritesContext } from '../lib/favorites'\nimport { ToggleButton } from '../toggle-button/toggle-button'\nimport { FavoriteIcon } from '../favorite-icon/favorite-icon'\nimport './favorite-toggle.scss'\n\nexport function FavoriteToggle ({ active, type, payload, ...props }) {\n  const [, dispatch] = useContext(FavoritesContext)\n\n  return (\n    <ToggleButton\n      className='favorite-toggle'\n      {...props}\n      active={active}\n      onToggle={() => {\n        dispatch({ type, payload })\n      }}\n    >\n      <FavoriteIcon active={active} />\n    </ToggleButton>\n  )\n}\n","import React, { useCallback, useContext, useRef, useEffect, useState } from 'react'\nimport { FavoriteToggle } from '../favorite-toggle/favorite-toggle'\nimport { SearchContext, IntersectionContext } from '../app'\nimport { FavoritesContext } from '../lib/favorites'\nimport { useObservedRef } from '../lib/observer'\nimport { assemble, throttleRAF } from '../lib/util'\nimport './search-box.scss'\n\nfunction selectTag ({ target }) {\n  const { value, selectionStart, selectionEnd } = target\n\n  if (selectionStart !== selectionEnd) {\n    return\n  }\n\n  const wordStart = value.slice(0, selectionStart).match(/\\S*$/).pop()\n  const wordEnd = value.slice(selectionEnd).match(/^\\S*/).pop()\n\n  if (wordStart[0] === '#') {\n    target.selectionStart = selectionStart - wordStart.length\n    target.selectionEnd = selectionEnd + wordEnd.length\n  }\n}\n\nfunction useCanHide () {\n  const [canHide, setCanHide] = useState(false)\n\n  useEffect(() => {\n    let scrollY = window.scrollY\n\n    const handleScroll = throttleRAF(() => {\n      setCanHide(window.scrollY > scrollY)\n      scrollY = window.scrollY\n    })\n\n    window.addEventListener('scroll', handleScroll)\n    return () => window.removeEventListener('scroll', handleScroll)\n  }, [])\n\n  useEffect(() => {\n    if (canHide) {\n      return\n    }\n\n    const handle = window.setTimeout(setCanHide, 1000, true)\n    return () => window.clearTimeout(handle)\n  }, [canHide])\n\n  return canHide\n}\n\nfunction useFocusRef (setValue) {\n  const inputRef = useRef()\n\n  const handleKeyDown = useCallback(({ key, target }) => {\n    const { current } = inputRef\n\n    if (target !== current && (\n      key.length === 1 ||\n      key === 'Backspace'\n    )) {\n      setValue(value => value.trim())\n      current.focus({ preventScroll: true })\n    }\n\n    if (key === 'Escape') {\n      setValue('')\n    }\n  }, [setValue])\n\n  useEffect(() => {\n    document.addEventListener('keydown', handleKeyDown)\n    return () => document.removeEventListener('keydown', handleKeyDown)\n  }, [handleKeyDown])\n\n  return inputRef\n}\n\nexport function SearchBox (props) {\n  const [search, setSearch] = useContext(SearchContext)\n  const [favorites] = useContext(FavoritesContext)\n  const inputRef = useFocusRef(setSearch)\n  const observer = useContext(IntersectionContext)\n  const [stickyRef, { isIntersecting }] = useObservedRef(observer)\n  const isSticky = !isIntersecting\n  const canHide = useCanHide() && isSticky\n\n  return (\n    <>\n      <div\n        ref={stickyRef}\n        className='sticky-sentinel'\n      />\n\n      <form\n        className={assemble(\n          'search-box',\n          isSticky && '-is-sticky',\n          canHide && '-can-hide'\n        )}\n      >\n        <FavoriteToggle\n          active={favorites.show}\n          type='toggle_show'\n        />\n\n        <label className='search-field'>\n          Search\n          <input\n            {...props}\n            type='text'\n            ref={inputRef}\n            value={search}\n            onChange={useCallback(event => {\n              setSearch(event.target.value)\n            }, [setSearch])}\n            onMouseUp={selectTag}\n          />\n        </label>\n\n        <button\n          className='reset-button'\n          type='reset'\n          onClick={useCallback(() => {\n            setSearch('')\n          }, [setSearch])}\n        >&#128473;</button>\n      </form>\n    </>\n  )\n}\n","import React from 'react'\n\nexport function AlbumLink ({ album }) {\n  const { artist, title, link } = album\n  return <a href={link} target='_blank' rel='noopener noreferrer'>{artist} - {title}</a>\n}\n","import React, { useCallback, useContext } from 'react'\nimport { SelectedContext } from '../app'\nimport { FavoritesContext, isFavorite } from '../lib/favorites'\nimport { FavoriteIcon } from '../favorite-icon/favorite-icon'\nimport { getAlbum } from '../lib/data'\nimport { hasValues } from '../lib/util'\nimport './related-list.scss'\n\nexport function RelatedList ({ related }) {\n  const albums = related && related.map(getAlbum)\n  const [, setSelected] = useContext(SelectedContext)\n  const [favorites] = useContext(FavoritesContext)\n\n  const selectAlbum = useCallback(event => {\n    const { id, related } = getAlbum(event.target.dataset.id)\n\n    event.preventDefault()\n    setSelected(selected => selected.filter(id => !related.includes(id)).concat([id]))\n  }, [setSelected])\n\n  return hasValues(albums) ? (\n    <div className='related-list'>\n      {albums.map(({ id, title, link }) => (\n        <a onClick={selectAlbum} key={id} data-id={id} href={link}>\n          {title}\n          <FavoriteIcon active={isFavorite(favorites, id)} />\n        </a>\n      ))}\n    </div>\n  ) : null\n}\n","import React, { useCallback, useContext } from 'react'\nimport { SearchContext } from '../app'\nimport { split, toggle, assemble, hasValues } from '../lib/util'\nimport './tag-list.scss'\n\nexport function TagList ({ tags, ...props }) {\n  const [, setSearch] = useContext(SearchContext)\n\n  const onClick = useCallback(event => {\n    const tag = event.target.hash\n\n    event.preventDefault()\n    setSearch(search => assemble(toggle(split(search), tag)))\n  }, [setSearch])\n\n  return hasValues(tags) ? (\n    <div className='tag-list'>{\n      tags.map(tag => <a\n        {...props}\n        onClick={onClick}\n        key={tag}\n        href={tag}>{tag}</a>)\n    }\n    </div>\n  ) : null\n}\n","import React from 'react'\nimport { AlbumLink } from '../album-link/album-link'\nimport { FavoriteToggle } from '../favorite-toggle/favorite-toggle'\nimport { ToggleButton } from '../toggle-button/toggle-button'\nimport { RelatedList } from '../related-list/related-list'\nimport { TagList } from '../tag-list/tag-list'\nimport './player-head.scss'\n\nexport function PlayerHead ({ album, isFavorite, onToggleTracklist }) {\n  const { id, tags, related } = album\n\n  return (\n    <div className='player-head'>\n      <h2 className='title'>\n        <AlbumLink album={album} />\n      </h2>\n\n      <TagList tags={tags} />\n      <RelatedList related={related} />\n\n      <div className='controls'>\n        <ToggleButton\n          className='tracklist-toggle'\n          onToggle={onToggleTracklist}\n        >tracklist</ToggleButton>\n\n        <FavoriteToggle\n          active={isFavorite}\n          type='toggle_id'\n          payload={id}\n        />\n      </div>\n    </div>\n  )\n}\n","import React, { useContext } from 'react'\nimport { useObservedRef } from '../lib/observer'\nimport { IntersectionContext } from '../app'\nimport { assemble } from '../lib/util'\n\nexport function LazyIframe ({ src, title, className, onLoad, ...props }) {\n  const observer = useContext(IntersectionContext)\n  const [ref, { isIntersecting }] = useObservedRef(observer, true)\n\n  return (\n    <iframe\n      ref={ref}\n      title={title}\n      src={isIntersecting ? src : ''}\n      onLoad={isIntersecting ? onLoad : null}\n      className={assemble(className, 'lazy-iframe')}\n      {...props}\n    />\n  )\n}\n","import React, { memo, useCallback, useState, useMemo } from 'react'\nimport { PlayerHead } from '../player-head/player-head'\nimport { LazyIframe } from '../lazy-iframe/lazy-iframe'\nimport { AlbumLink } from '../album-link/album-link'\nimport { useStoredState } from '../lib/storage'\nimport { assemble } from '../lib/util'\nimport { getHSV } from '../lib/color'\nimport './player.scss'\n\nconst BASE_URL = 'https://bandcamp.com/EmbeddedPlayer/'\n\nfunction encodeOptions (options) {\n  return Object\n    .entries(options)\n    .map(entry => entry.map(encodeURIComponent).join('='))\n    .join('/')\n}\n\nexport const Player = memo(\n  function Player ({ album, isFavorite, showRelated }) {\n    const [showTracklist, setShowTracklist] = useStoredState(['tracklist', album.id], false)\n    const [isLoading, setIsLoading] = useState(true)\n    const { title, params } = album\n    const color = useMemo(() => getHSV(params.linkcol), [params.linkcol])\n\n    return (\n      <div\n        className={'player'}\n        style={{\n          '--linkcol-hue': color.hue,\n          '--linkcol-saturation': color.saturation,\n          '--linkcol-lightness': color.lightness,\n          '--bgcol': `#${params.bgcol}`\n        }}\n      >\n        <PlayerHead\n          album={album}\n          isFavorite={isFavorite}\n          onToggleTracklist={setShowTracklist}\n        />\n\n        <LazyIframe\n          title={title}\n          src={BASE_URL + encodeOptions(params)}\n          onLoad={useCallback(() => {\n            setIsLoading(false)\n          }, [setIsLoading])}\n          className={assemble(\n            isLoading && '-is-loading',\n            showTracklist && '-is-expanded'\n          )}\n          seamless\n        ><AlbumLink album={album} /></LazyIframe>\n      </div>\n    )\n  }\n)\n","import React, { useContext, useState, useEffect } from 'react'\nimport { SearchContext, SelectedContext } from '../app'\nimport { FavoritesContext, filterFavorites, isFavorite } from '../lib/favorites'\nimport { Player } from '../player/player'\nimport { albums, getId } from '../lib/data'\nimport { searchList } from '../lib/util'\n\nexport function PlayerList () {\n  const [search] = useContext(SearchContext)\n  const [selected] = useContext(SelectedContext)\n  const [favorites] = useContext(FavoritesContext)\n  const [matches, setMatches] = useState(albums.map(getId))\n  const splitRelated = search.trim() || favorites.show\n\n  useEffect(() => {\n    setMatches(searchList(albums, ['artist', 'title', 'tags'], search).map(getId))\n  }, [search])\n\n  return (\n    <ul>\n      {albums.map(album => (\n        <li key={album.id} hidden={\n          !filterFavorites(favorites, matches).includes(album.id) ||\n          !(splitRelated || selected.includes(album.id))\n        }>\n          <Player\n            album={album}\n            isFavorite={isFavorite(favorites, album)}\n            showRelated={!splitRelated}\n          />\n        </li>\n      ))}\n    </ul>\n  )\n}\n","import React, { createContext, useEffect } from 'react'\nimport { useObserver, IntersectionObserver, ResizeObserver } from './lib/observer'\nimport { FavoritesProvider } from './lib/favorites'\nimport { useStoredState } from './lib/storage'\nimport { firstForArtist } from './lib/data'\nimport { createProvider } from './lib/provider'\nimport { throttleRAF } from './lib/util'\nimport { Hero } from './hero/hero'\nimport { SearchBox } from './search-box/search-box'\nimport { PlayerList } from './player-list/player-list'\n\nexport const IntersectionContext = createContext(null)\nexport const SearchContext = createContext(null)\nexport const SelectedContext = createContext(null)\n\nconst SearchProvider = createProvider(SearchContext, useStoredState, 'search', '')\nconst SelectedProvider = createProvider(SelectedContext, useStoredState, 'selected', firstForArtist)\n\nconst adjustHueShift = throttleRAF(() => {\n  const scrollMax = document.documentElement.scrollHeight - window.innerHeight\n  const scrollDegree = window.scrollY / scrollMax * 360 || 0\n  document.documentElement.style.setProperty('--hue-shift', scrollDegree)\n})\n\nexport function App () {\n  const observer = useObserver(IntersectionObserver)\n\n  useEffect(() => {\n    window.addEventListener('scroll', adjustHueShift)\n    return () => window.removeEventListener('scroll', adjustHueShift)\n  }, [])\n\n  useEffect(() => {\n    const observer = new ResizeObserver()\n    observer.observe(document.body, adjustHueShift)\n    return () => observer.disconnect()\n  }, [observer])\n\n  return (\n    <div className='app'>\n      <Hero headline='cl4ss musik' copy='ön ßandcamp' />\n\n      <IntersectionContext.Provider value={observer}>\n        <SearchProvider>\n          <SelectedProvider>\n            <FavoritesProvider>\n              <SearchBox />\n              <PlayerList />\n            </FavoritesProvider>\n          </SelectedProvider>\n        </SearchProvider>\n      </IntersectionContext.Provider>\n    </div>\n  )\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport { App } from './app'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}