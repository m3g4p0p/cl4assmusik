(this.webpackJsonpcl4assmusik=this.webpackJsonpcl4assmusik||[]).push([[0],[,,,,function(e){e.exports=JSON.parse('{"constants":{"MAX_INITIAL_HUE_SHIFT":360},"defaults":{"size":"large","bgcol":"333333","linkcol":"9acd32","artwork":"small","transparent":true},"albums":[{"params":{"album":1181245919},"link":"https://dirtnaprecords.bandcamp.com/album/jim-and-the-french-vanilla-afraid-of-the-house","artist":"Jim And The French Vanilla","title":"Afraid Of The House","tags":["garage","lofi"]},{"params":{"album":1813453384,"linkcol":"9a64ff"},"linkcol":"9a64ff","link":"https://dirtnaprecords.bandcamp.com/album/the-hussy-looming","artist":"The Hussy","title":"Looming"},{"params":{"album":3648015892},"link":"http://dirtnaprecords.bandcamp.com/album/personality-cult-new-arrows","artist":"Personality Cult","title":"New Arrows by Dirtnap Records","tags":["garage","punk","pop"]},{"params":{"album":2468309475},"link":"http://greenbluempls.bandcamp.com/album/green-blue-green-blue-lp","artist":"Green/Blue","title":"GREEN/BLUE LP","tags":["garage","lofi"]},{"params":{"album":3446673543},"link":"http://hannielkhatib.bandcamp.com/album/flight","artist":"Hanni El Khatib","title":"FLIGHT"},{"params":{"album":3153160134},"link":"http://liquids1.bandcamp.com/album/100-shit","artist":"Liquids","title":"100% Shit"},{"params":{"album":1328233720},"link":"https://synthscene.bandcamp.com/album/40-years-of-synth-punk-volume-1-pay-what-you-want","artist":"Synth Scene","title":"40 Years Of Synth Punk - Volume 1"},{"params":{"album":371070950},"link":"https://geeteeband.bandcamp.com/album/g-t-r-r-c-ii","artist":"G.T.R.R.C","title":"G.T.R.R.C II"},{"params":{"album":1242982303},"link":"https://adoseofchemtrails.bandcamp.com/album/the-peculiar-smell-of-the-inevitable-lp","artist":"Chemtrails","title":"The Peculiar Smell of the Inevitable [LP]"},{"link":"https://civicivic.bandcamp.com/album/new-vietnam-12-ep","artist":"Civic","title":"New Vietnam 12\\" EP","params":{"album":1974704659}},{"link":"https://ausmuteants.bandcamp.com/album/split-personalities-2","artist":"AUSMUTEANTS","title":"Split Personalities","params":{"album":919571170}},{"link":"https://civicivic.bandcamp.com/album/those-who-no-ep","artist":"Civic","title":"Those Who No EP","params":{"album":1117341658}},{"link":"https://archaeas.bandcamp.com/album/archaeas","artist":"The Archaeas","title":"Archaeas","params":{"album":936995500}},{"link":"https://dirtnaprecords.bandcamp.com/album/legendary-wings-do-you-see","artist":"Legendary Wings","title":"Do You See?","params":{"album":1900484493}},{"link":"https://dirtnaprecords.bandcamp.com/album/legendary-wings-making-paper-roses-2","artist":"Legendary Wings","title":"Making Paper Roses","params":{"album":1951743742}},{"link":"https://adoseofchemtrails.bandcamp.com/album/calf-of-the-sacred-cow-lp","artist":"Chemtrails","title":"Calf of the Sacred Cow [LP]","params":{"album":2863932347}},{"link":"https://adoseofchemtrails.bandcamp.com/album/cuckoo-spit-ep","artist":"Chemtrails","title":"Cuckoo Spit [EP]","params":{"album":3830893120}},{"link":"https://drunkensailorrecords.bandcamp.com/album/st-lp-12","artist":"The Mark Vodka Group","title":"ST LP","params":{"album":284594840}},{"link":"https://theneptunepowerfederation.bandcamp.com/album/neath-a-shin-ei-sun","artist":"The Neptune Power Federation","title":"Neath A Shin Ei Sun","tags":["glam","rock"],"params":{"album":2151102053}},{"link":"https://theneptunepowerfederation.bandcamp.com/album/memoirs-of-a-rat-queen","artist":"The Neptune Power Federation","title":"Memoirs Of A Rat Queen","tags":["glam","rock"],"params":{"album":3805787157}}]}')},,,,,,,,,,function(e,t,a){e.exports=a(28)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),i=a.n(c),l=(a(19),a(1)),o=a(10),s=a(11),u=a(3),m=a(5),b=a(12),f=a(13);function d(e){var t=this;e.forEach((function(e){var a=e.target,n=e.isIntersecting,r=t.callbacks.get(a)||{},c=r.callback,i=r.once;c&&(c(e,t),i&&n&&t.unobserve(a))}))}function p(e){return function(e){Object(f.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,d,e)).callbacks=new Map,n}return Object(s.a)(a,[{key:"observe",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.callbacks.set(e,{callback:t,once:n}),Object(m.a)(Object(u.a)(a.prototype),"observe",this).call(this,e)}},{key:"unobserve",value:function(e){return this.callbacks.delete(e),Object(m.a)(Object(u.a)(a.prototype),"unobserve",this).call(this,e)}},{key:"disconnect",value:function(){return this.callbacks.clear(),Object(m.a)(Object(u.a)(a.prototype),"disconnect",this).call(this)}},{key:"takeRecords",value:function(){var e=Object(m.a)(Object(u.a)(a.prototype),"takeRecords",this).call(this);return d.call(this,e),e}}]),a}(e)}var h=p(window.IntersectionObserver),v=p(window.ResizeObserver);function g(e,t){var a=Object(n.useRef)(),r=Object(n.useState)({}),c=Object(l.a)(r,2),i=c[0],o=c[1];return Object(n.useEffect)((function(){var n=a.current;if(n&&e)return e.observe(n,o,t),function(){return e.unobserve(n)}}),[a,e,t]),[a,i]}function O(e,t){for(var a=arguments.length,c=new Array(a>2?a-2:0),i=2;i<a;i++)c[i-2]=arguments[i];return function(a){var i=t.apply(void 0,c),o=Object(l.a)(i,2),s=o[0],u=o[1],m=Object(n.useMemo)((function(){return[s,u]}),[s,u]);return r.a.createElement(e.Provider,Object.assign({value:m},a))}}function j(e,t){var a=function(e){if("string"===typeof e)return e;var t=Object(l.a)(e,2),a=t[0],n=t[1];return"".concat(a,"_").concat(n)}(e),r=Object(n.useState)(function(e){var t=window.localStorage.getItem(e);return t&&JSON.parse(t)}(a)||t),c=Object(l.a)(r,2),i=c[0],o=c[1];return Object(n.useEffect)((function(){var e=window.requestIdleCallback((function(){!function(e,t){window.localStorage.setItem(e,JSON.stringify(t))}(a,i)}));return function(){return window.cancelIdleCallback(e)}}),[a,i]),[i,o]}function k(e,t){var a=e.filter((function(e){return e!==t}));return a.length<e.length?a:e.concat([t])}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return e.map((function(e){return Array.isArray(e)?w(e,t):e})).join(t)}function E(e){return e.split(/\s+/)}function y(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return w(t.filter(Boolean)).trim()}function C(e){return!e}function S(e){return e&&e.length>0}function N(e){var t=!1;return function(){t||(t=!0,window.requestAnimationFrame((function(){e(),t=!1})))}}function T(e,t){var a="object"===typeof t?t.id:t;return e.ids.includes(a)}function I(e,t){return e.show?t.filter((function(t){return T(e,t)})):t}var L=Object(n.createContext)(null),x=O(L,(function(e,t,a){var r=j(t,a),c=Object(l.a)(r,2),i=c[0],o=c[1],s=Object(n.useReducer)(e,i),u=Object(l.a)(s,2),m=u[0],b=u[1];return Object(n.useEffect)((function(){o(m)}),[m,o]),[m,b]}),(function(e,t){var a=e.show,n=e.ids,r=t.type,c=t.payload;switch(r){case"toggle_id":return{show:a,ids:k(n,c)};case"toggle_show":return{show:!a,ids:n};default:throw new Error("Invalid action ".concat(t.type))}}),"favorites",{show:!1,ids:[]}),A=a(7),P=a(4),R=a(6),M=a.n(R);function F(e,t){return function(e,t){return M()("#"+e).shiftHue(t).toCSS().slice(1)}(e,Math.round(Math.random()*t)%360)}var H=P.constants.MAX_INITIAL_HUE_SHIFT;function _(e){var t=e.artist,a=e.title;return"".concat(t.replace(/^the\s+/i,"")," ").concat(a)}function U(e){var t=e.params,a=t.linkcol,n=void 0===a?P.defaults.linkcol:a,r=t.bgcol,c=void 0===r?P.defaults.bgcol:r;return{linkcol:F(n,H),bgcol:F(c,H)}}function B(e){var t=e.id,a=e.params;return t||a.album}function G(e){var t=Number(e);return J.find((function(e){return e.id===t}))}var J=P.albums.map((function(e){return Object(A.a)({},e,{id:B(e),tags:e.tags&&e.tags.map((function(e){return"#".concat(e)})),params:Object(A.a)({},P.defaults,{},e.params,{},U(e)),related:P.albums.filter((function(t){var a=t.artist,n=t.title;return a===e.artist&&n!==e.title})).map(B)})})).sort((function(e,t){return _(e)<_(t)?-1:1})),Y=J.reduce((function(e,t){return e.every((function(e){return e.artist!==t.artist}))&&e.push(t),e}),[]).map(B),q=a(2);a(20);function W(e){var t=e.headline,a=e.copy;Object(q.a)(e,["headline","copy"]);return r.a.createElement("div",{className:"hero"},r.a.createElement("h1",null,t),r.a.createElement("p",null,a))}a(21);function D(e){var t=e.onClick,a=e.active,c=e.onToggle,i=e.update,l=void 0===i?C:i,o=e.className,s=void 0===o?"":o,u=Object(q.a)(e,["onClick","active","onToggle","update","className"]),m=Object(n.useCallback)((function(e){t&&t(e),c(l)}),[t,c,l]);return r.a.createElement("button",Object.assign({type:"button"},u,{className:y(s,"toggle-button",a&&"-is-active"),onClick:m}))}function V(e){var t=e.active;return r.a.createElement("span",{className:"favorite-icon"},t?"\u2605":"\u2606")}a(22);function z(e){var t=e.active,a=e.type,c=e.payload,i=Object(q.a)(e,["active","type","payload"]),o=Object(n.useContext)(L),s=Object(l.a)(o,2)[1];return r.a.createElement(D,Object.assign({className:"favorite-toggle"},i,{active:t,onToggle:function(){s({type:a,payload:c})}}),r.a.createElement(V,{active:t}))}a(23);function X(e){var t=e.target,a=t.value,n=t.selectionStart,r=t.selectionEnd;if(n===r){var c=a.slice(0,n).match(/\S*$/).pop(),i=a.slice(r).match(/^\S*/).pop();"#"===c[0]&&(t.selectionStart=n-c.length,t.selectionEnd=r+i.length)}}function $(e){var t=Object(n.useContext)(ce),a=Object(l.a)(t,2),c=a[0],i=a[1],o=Object(n.useContext)(L),s=Object(l.a)(o,1)[0],u=function(e){var t=Object(n.useRef)(),a=Object(n.useCallback)((function(a){var n=a.key,r=a.target,c=t.current;r===c||1!==n.length&&"Backspace"!==n||(e((function(e){return e.trim()})),c.focus({preventScroll:!0})),"Escape"===n&&e("")}),[e]);return Object(n.useEffect)((function(){return document.addEventListener("keydown",a),function(){return document.removeEventListener("keydown",a)}}),[a]),t}(i),m=g(Object(n.useContext)(re)),b=Object(l.a)(m,2),f=b[0],d=!b[1].isIntersecting,p=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){var e=window.scrollY,t=N((function(){r(window.scrollY>e),e=window.scrollY}));return window.addEventListener("scroll",t),function(){return window.removeEventListener("scroll",t)}}),[]),Object(n.useEffect)((function(){if(!a){var e=window.setTimeout(r,1e3,!0);return function(){return window.clearTimeout(e)}}}),[a]),a}()&&d;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:f,className:"sticky-sentinel"}),r.a.createElement("form",{className:y("search-box",d&&"-is-sticky",p&&"-can-hide")},r.a.createElement(z,{active:s.show,type:"toggle_show"}),r.a.createElement("label",{className:"search-field"},"Search",r.a.createElement("input",Object.assign({},e,{type:"text",ref:u,value:c,onChange:Object(n.useCallback)((function(e){i(e.target.value)}),[i]),onMouseUp:X}))),r.a.createElement("button",{className:"reset-button",type:"reset",onClick:Object(n.useCallback)((function(){i("")}),[i])},"\ud83d\uddd9")))}function K(e){var t=e.album,a=t.artist,n=t.title,c=t.link;return r.a.createElement("a",{href:c,target:"_blank",rel:"noopener noreferrer"},a," - ",n)}a(24);function Q(e){var t=e.related,a=t&&t.map(G),c=Object(n.useContext)(ie),i=Object(l.a)(c,2)[1],o=Object(n.useContext)(L),s=Object(l.a)(o,1)[0],u=Object(n.useCallback)((function(e){var t=G(e.target.dataset.id),a=t.id,n=t.related;e.preventDefault(),i((function(e){return e.filter((function(e){return!n.includes(e)})).concat([a])}))}),[i]);return S(a)?r.a.createElement("div",{className:"related-list"},a.map((function(e){var t=e.id,a=e.title,n=e.link;return r.a.createElement("a",{onClick:u,key:t,"data-id":t,href:n},a,r.a.createElement(V,{active:T(s,t)}))}))):null}a(25);function Z(e){var t=e.tags,a=Object(q.a)(e,["tags"]),c=Object(n.useContext)(ce),i=Object(l.a)(c,2)[1],o=Object(n.useCallback)((function(e){var t=e.target.hash;e.preventDefault(),i((function(e){return y(k(E(e),t))}))}),[i]);return S(t)?r.a.createElement("div",{className:"tag-list"},t.map((function(e){return r.a.createElement("a",Object.assign({},a,{onClick:o,key:e,href:e}),e)}))):null}a(26);function ee(e){var t=e.album,a=e.isFavorite,n=e.onToggleTracklist,c=t.id,i=t.tags,l=t.related;return r.a.createElement("div",{className:"player-head"},r.a.createElement("h2",{className:"title"},r.a.createElement(K,{album:t})),r.a.createElement(Z,{tags:i}),r.a.createElement(Q,{related:l}),r.a.createElement("div",{className:"controls"},r.a.createElement(D,{className:"tracklist-toggle",onToggle:n},"tracklist"),r.a.createElement(z,{active:a,type:"toggle_id",payload:c})))}function te(e){var t=e.src,a=e.title,c=e.className,i=e.onLoad,o=Object(q.a)(e,["src","title","className","onLoad"]),s=g(Object(n.useContext)(re),!0),u=Object(l.a)(s,2),m=u[0],b=u[1].isIntersecting;return r.a.createElement("iframe",Object.assign({ref:m,title:a,src:b?t:"",onLoad:b?i:null,className:y(c,"lazy-iframe")},o))}a(27);var ae=Object(n.memo)((function(e){var t,a=e.album,c=e.isFavorite,i=(e.showRelated,j(["tracklist",a.id],!1)),o=Object(l.a)(i,2),s=o[0],u=o[1],m=Object(n.useState)(!0),b=Object(l.a)(m,2),f=b[0],d=b[1],p=a.title,h=a.params,v=Object(n.useMemo)((function(){return e=h.linkcol,new M.a("#"+e).toHSL();var e}),[h.linkcol]);return r.a.createElement("div",{className:"player",style:{"--linkcol-hue":v.hue,"--linkcol-saturation":v.saturation,"--linkcol-lightness":v.lightness,"--bgcol":"#".concat(h.bgcol)}},r.a.createElement(ee,{album:a,isFavorite:c,onToggleTracklist:u}),r.a.createElement(te,{title:p,src:"https://bandcamp.com/EmbeddedPlayer/"+(t=h,Object.entries(t).map((function(e){return e.map(encodeURIComponent).join("=")})).join("/")),onLoad:Object(n.useCallback)((function(){d(!1)}),[d]),className:y(f&&"-is-loading",s&&"-is-expanded"),seamless:!0},r.a.createElement(K,{album:a})))}));function ne(){var e=Object(n.useContext)(ce),t=Object(l.a)(e,1)[0],a=Object(n.useContext)(ie),c=Object(l.a)(a,1)[0],i=Object(n.useContext)(L),o=Object(l.a)(i,1)[0],s=Object(n.useState)(J.map(B)),u=Object(l.a)(s,2),m=u[0],b=u[1],f=t.trim()||o.show;return Object(n.useEffect)((function(){b(function(e,t,a){var n=E(a).map((function(e){return new RegExp(e,"i")}));return e.filter((function(e){var a=w(t.map((function(t){return e[t]})));return n.every((function(e){return e.test(a)}))}))}(J,["artist","title","tags"],t).map(B))}),[t]),r.a.createElement("ul",null,J.map((function(e){return r.a.createElement("li",{key:e.id,hidden:!I(o,m).includes(e.id)||!(f||c.includes(e.id))},r.a.createElement(ae,{album:e,isFavorite:T(o,e),showRelated:!f}))})))}var re=Object(n.createContext)(null),ce=Object(n.createContext)(null),ie=Object(n.createContext)(null),le=O(ce,j,"search",""),oe=O(ie,j,"selected",Y),se=N((function(){var e=document.documentElement.scrollHeight-window.innerHeight,t=window.scrollY/e*360||0;document.documentElement.style.setProperty("--hue-shift",t)}));function ue(){var e=function(e,t){var a=Object(n.useState)(null),r=Object(l.a)(a,2),c=r[0],i=r[1];return Object(n.useEffect)((function(){var a=new e(t);return i(a),function(){return a.disconnect()}}),[e,t]),c}(h);return Object(n.useEffect)((function(){return window.addEventListener("scroll",se),function(){return window.removeEventListener("scroll",se)}}),[]),Object(n.useEffect)((function(){var e=new v;return e.observe(document.body,se),function(){return e.disconnect()}}),[e]),r.a.createElement("div",{className:"app"},r.a.createElement(W,{headline:"cl4ss musik",copy:"\xf6n \xdfandcamp"}),r.a.createElement(re.Provider,{value:e},r.a.createElement(le,null,r.a.createElement(oe,null,r.a.createElement(x,null,r.a.createElement($,null),r.a.createElement(ne,null))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[14,1,2]]]);
//# sourceMappingURL=main.a2e60a6d.chunk.js.map